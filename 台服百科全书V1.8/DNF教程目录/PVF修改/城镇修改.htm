
<!DOCTYPE HTML PUBLIC>
<html>
<head>
<title>城镇修改</title>


<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>




<style>
html,div { margin: 0; padding: 0;}

body {
	padding: 0px;
	margin: 0px;
	overflow: auto;
	height: 100%;
}

#winchm_template_button{
	float: right;
	width: 93px;
	top: 7px;
	position: relative;
	text-align: right;
	right: 5px;
	height: auto;
}

#winchm_template_top{
	padding: 0px;
	margin: 0px;
	border-bottom: 1px solid #9B9B9B;
	background-color: #B1CEFE;
}

#winchm_template_navigation{
	margin: 0px;
	padding-top: 7px;
	padding-left: 7px;
	padding-bottom: 3px;
	padding-right: 0px;
	font-size: 8.5pt;
	font-family: Arial, Helvetica, sans-serif;
	font-weight: normal;
	color: #585858;
}

#winchm_template_title{
	margin: 0px;
	padding-top: 4px;
	padding-left: 7px;
	padding-bottom: 7px;
	padding-right: 0px;
	font-size: 18px; 
	font-family: Verdana, Geneva, sans-serif;
	color: #363636;
}

#winchm_template_content{
	margin-top: 20px;
	margin-left: 15px;
	margin-bottom: 20px;
	margin-right: 15px;
	width: auto  !important;
	width: 100%;
}

#winchm_template_footer{
	border-width: 1px;
	border-color: #B1CEFE;
	border-top-style: solid;
	margin-top: 15px;
	margin-left: 15px;
	margin-bottom: 20px;
	margin-right: 15px;
	padding-top: 7px;
	padding-left: 0px;
	padding-bottom: 0px;
	padding-right: 0px;
	font-family: arial, helvetica, sans-serif;
	font-size: 8.5pt;
	color: #696969;
	width: auto;
	text-align: left;
}


#winchm_template_container{
	margin: 0px;
	padding: 0px;
	position: static;
	padding-bottom: 3px;
	overflow: auto;
	background-color: #FFFFFF;
}


@media print
{
#winchm_template_container{
	position: static;	
	margin: 0px;
	padding: 5px;
	
	width: auto;
	height: auto;
	overflow: auto;
}
#winchm_template_button{
visibility:hidden;
}
}

#winchm_template_navigation A:link	{text-decoration: none; color:#004080}
#winchm_template_navigation A:visited  {text-decoration: none; color: #004080}
#winchm_template_navigation A:active {text-decoration: none; color: #004080 }
#winchm_template_navigation A:hover {text-decoration: none;color: #0080FF}

A:link	{text-decoration: underline; color:#0033CC}
A:visited  {text-decoration: underline; color: #0033CC}
A:active {text-decoration: underline; color: #0033CC }
A:hover {text-decoration: underline;color: #FF0000;}
</style>
<script type="text/javascript">
function isMobile(){
Agent = window.navigator.userAgent;
if (Agent.indexOf("iPhone")>=1 || Agent.indexOf("iPad")>=1 || Agent.indexOf("iPod")>=1 || Agent.indexOf("Android")>=1){
return true;
}else{
return false;	
}

}
function d_onresize(){
if (window.navigator.userAgent.indexOf("MSIE")>=1){
document.getElementById('winchm_template_container').style.pixelWidth = document.body.offsetWidth - 3;
document.getElementById('winchm_template_container').style.pixelHeight = document.body.offsetHeight - document.getElementById('winchm_template_top').offsetHeight - 4;
}
document.getElementById('winchm_template_container').style.top = document.getElementById('winchm_template_top').offsetHeight + 'px';
}

function d_onbeforeprint(){
document.getElementById('winchm_template_container').style.width = 'auto';
document.getElementById('winchm_template_container').style.height = 'auto';
}

function d_onafterprint(){
d_onresize();
}

if(!isMobile()){

window.onload = d_onresize;
window.onresize = d_onresize;
window.onbeforeprint = d_onbeforeprint;
window.onafterprint = d_onafterprint;





}

</script>
</head>

<body>

<div id="winchm_template_top">
	<div id="winchm_template_button"><A href="地图修改.htm" title="Previous topic"><img id="winchm_template_prev" alt="Previous topic" src="../../template2/btn_prev_n.gif" border="0"></a><A href="装备修改.htm" title="Next topic"><img id="winchm_template_next" alt="Next topic" src="../../template2/btn_next_n.gif" border="0"></a></div>
	<div id="winchm_template_navigation"><a href="index.html">Help</a> &gt; 
<A href="PVF修改.htm">PVF修改</A> &gt; <A href="PVF修改心得.htm">PVF修改心得</A> &gt; </div>
	<div id="winchm_template_title">城镇修改</div>
</div>
<div id="winchm_template_container">
	<div id="winchm_template_content">
<P>城镇篇：<BR>我们发现时空之门，发电站的那些城镇并没有开放，就是下图的这些。接下来我们来实现这些</P>
<P><IMG alt="" src="../../images/城镇修改01.jpg"></P>
<P><IMG alt="" src="../../images/城镇修改02.jpg"></P>
<P>因为是城镇，所以打开<STRONG><FONT color=#ff0000>TOWN</FONT></STRONG>文件夹，在这个文件夹里可以看到<FONT color=#ff0000><STRONG>timegate,powerstation</STRONG></FONT>,时空之门，发电站，这些都是基本的英语翻译，我们在研究这些文件的时候，只要想想这些文件的英语意思就可以了。<BR>打开<STRONG><FONT color=#ff0000>timegate.twn</FONT></STRONG>，<STRONG><FONT color=#ff0000>删除<BR></FONT></STRONG>[need quest]<BR>4117<BR>[/need 
quest]<BR>这样就去掉了这个城镇的限制，等于是解锁了这个城镇。</P>
<P><STRONG><FONT color=#ff0000>need 
quest</FONT></STRONG>意思为需要的任务，因为我们无法完成编号为<STRONG><FONT color=#ff0000>4117</FONT></STRONG>的这个任务，</P>
<P>自然无法开启这个城镇。下面还有个<FONT color=#ff0000><STRONG>[need 
level]</STRONG></FONT>，表示等级限制</P>
<P>城镇篇和上面的地图篇要连起来看，都是有关联的，都看懂了才行，要不然容易出问题<BR></P>
<P>总之涉及到<STRONG><FONT color=#ff0000>dungeon.lst</FONT></STRONG>，<STRONG><FONT color=#ff0000>dgn</FONT></STRONG>文件，<STRONG><FONT color=#ff0000>wdm</FONT></STRONG>文件和<STRONG><FONT color=#ff0000>worldmap</FONT></STRONG>里的<STRONG><FONT color=#ff0000>ui</FONT></STRONG>文件，<STRONG><FONT color=#ff0000>town.lst</FONT></STRONG>，<STRONG><FONT color=#ff0000>twn</FONT></STRONG>文件，<STRONG><FONT color=#ff0000>map</FONT></STRONG>文件，<STRONG><FONT color=#ff0000>npc</FONT></STRONG>文件</P>
<P>虽然城镇开启了，但是我们依然无法到达这个城镇，所以应该研究怎样在城镇之间转换。<BR>这里，我们联想到和城镇密切相关的map，事实上，</P>
<P>在town文件里就已经涉及到了map，所以想到map是很自然的事。<BR>打开map文件夹，找到shonan文件夹，再打开，看到<STRONG><FONT color=#ff0000>shonan_gymnasium.map</FONT></STRONG>，打开，用同样的方法，<FONT color=#ff0000><STRONG>删除<BR>[need quest] 
</STRONG></FONT> 
 这段代码，OK<BR>这样，已经可以实现到达时空之门这个城镇了</P>
<P>但是，随之而来的问题是虽然我们可以去到那个城镇，但是我们并没有看到门。所以要自己添加，在<STRONG><FONT color=#ff0000>animation</FONT></STRONG>下添加这段代码，表示门<BR><STRONG><FONT color=#ff0000>'Animation/timegate.ani' 
'[normal]' 91 186 0 'Animation/timegate.ani' '[normal]' 2500 186 
0<BR></FONT></STRONG>这里提一下，在添加代码时我们往往要在代码的<STRONG><FONT color=#ff0000>末尾添加一个空格</FONT></STRONG>，表示段落之间的间隔，这样才不会出错，否则会有问题</P>
<P>这里的扩展为，既然可以添加门，其实你也可以添加各种东西。</P>
<P>时空之门的城镇通过town和map的修改就可以了。<BR>另外，town,lst里并没有时空之门和发电站，所以要手动添加上去<BR>1 
'Elvengard.twn'<BR>2 'HendonMyre.twn'<BR>3 'WestCoast.twn'<BR>4 
'Alfhlyra.twn'<BR>5 'StormPass.twn'<BR>6 'Gent.twn'<BR>7 'Warfare.twn'<BR>8 
'GuildAgit.twn'<BR>9 'LuftHafen.twn'<BR>10 'Fair_PVP.twn'<BR>11 
'Shonan.twn'<BR>12 'timegate.twn'<BR>13 'timegaterequiem.twn'<BR>14 
'slough.twn'</P>
<P>发电站的twn文件也要修改下，道理同上</P>
<P>timegaterequiem，就是镇魂前的那个地图，那里会有问题，我没时间研究测试了，所以不提<BR>发电站是通过NPC的传送功能实现，所以修改NPC，NPC的名字是wernvonnegut.npc，打开后找到<BR>[role] 
代码段，改成<BR>[role]<BR>'[item shop]' 43 '[move town]' 
136<BR>[/role]<BR>这里讲解一下，ROLE代码表示NPC的功能，前面一个是物品店，后面是城镇间的移动</P>
<P>从这里我们可以联想到给NPC添加各种各样的功能。<BR></P></div>	
	<div id="winchm_template_footer">Copyright &copy; 2014. All rights 
reserved. (To change the copyright info, just edit it in template.)</div>
</div>

</body>
</html>
